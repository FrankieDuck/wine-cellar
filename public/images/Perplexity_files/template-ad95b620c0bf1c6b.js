!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1fcef982-e022-4bb2-a9c1-0f7c0aa6b9ad",e._sentryDebugIdIdentifier="sentry-dbid-1fcef982-e022-4bb2-a9c1-0f7c0aa6b9ad")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5489],{56373:function(){},77318:function(e,t,n){Promise.resolve().then(n.bind(n,17599))},17599:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(16158),o=n(78558),i=n(15057),l=n(99060),u=n(49510),s=n(95300);function a(e){let{children:t}=e,n=(0,u.nO)(),{trackEvent:a}=(0,l.WS)(),c=(0,i.usePathname)(),d=(0,i.useSearchParams)(),[E,m]=(0,o.useState)(null),{colorScheme:f}=(0,s.t)(),_=(0,o.useCallback)(e=>"/search"===e&&(null==d?void 0:d.get("newFrontendContextUUID"))||e.startsWith("/page/new")&&(null==d?void 0:d.get("newFrontendContextUUID"))||"/search/new"===e,[d]),p=(0,o.useCallback)(e=>{var t,r;let o=(null!==(t=null==e?void 0:e.split("?")[0])&&void 0!==t?t:"")===(null!==(r=null==E?void 0:E.split("?")[0])&&void 0!==r?r:"");!n||o||_(e)||(m(e),a("pageview",{internalReferrer:null!=E?E:void 0,colorScheme:f}))},[f,_,E,n,a]);return(0,o.useEffect)(()=>{c&&p(c)},[p,c]),(0,r.jsx)(r.Fragment,{children:t})}function c(e){let{children:t}=e;return(0,r.jsx)(a,{children:t})}},99060:function(e,t,n){"use strict";n.d(t,{Ir:function(){return g},WS:function(){return k},r2:function(){return p},zW:function(){return U}});var r=n(78558),o=n(3747),i=n(49510),l=n(53573),u=n(75059),s=n(69946),a=n(84385),c=n(32608);let d=0;class E{setOnce(){return -1==this.eventTime&&(this.eventTime=Date.now(),!0)}timeSinceTimestamp(e){return -1===this.eventTime||null===e?-1:this.eventTime<e?(console.log("TimeMarker.timeSinceTimestamp found inconsistency: mytime ".concat(this.eventTime,", old: ").concat(e)),-1):this.eventTime-e}timeBeforeTimestamp(e){return -1===this.eventTime||null===e?-1:this.eventTime>e?(console.log("TimeMarker.timeBeforeTimestamp found inconsistency: mytime ".concat(this.eventTime,", next: ").concat(e)),-1):e-this.eventTime}wasSet(){return -1!=this.eventTime}constructor(){this.eventTime=-1}}let m={queryStr:null,queryParams:null,isFollowup:null,submissionCount:null,submissionType:null,frontendUUID:null,submitTimestamp:null,startFirstServerResponseMarker:null,startLLMTokenMarker:null,endStreamTimestamp:null,finalizedTimestamp:null,firstServerResponseReceived:!1,firstLLMTokenReceived:!1,firstSearchResultsMarker:null},f=null,_=(e,t)=>{var n,r,o,i,u,s,c;let d;let E=Date.now(),m={...e,timestamp:E,isBrowserExtension:!1,timeZone:null===(o=Intl)||void 0===o?void 0:null===(r=o.DateTimeFormat())||void 0===r?void 0:null===(n=r.resolvedOptions())||void 0===n?void 0:n.timeZone};t&&(m.isPro=(null===(u=t.user)||void 0===u?void 0:u.subscription_status)&&(null===(s=t.user)||void 0===s?void 0:s.subscription_status)!=="none",m.userId=null==t?void 0:null===(c=t.user)||void 0===c?void 0:c.id);let f=window.location.pathname+window.location.search,_=!!getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title"),p=(0,a.dz)(),h=(0,l.mm)();return d=m.internalReferrer?m.internalReferrer:document.referrer,(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: minimal-ui)").matches||(null===(i=window.navigator)||void 0===i?void 0:i.standalone))&&(m.isStandaloneApp=!0),{eventData:m,pathnameAndParams:f,visitorId:h,isArcBrowser:_,deviceInfo:p,referrer:d}},p=e=>{let{name:t,data:n,socket:r,session:o}=e,i=e=>{if(r){let{eventData:o,visitorId:i,pathnameAndParams:l,isArcBrowser:s,deviceInfo:a,referrer:d}=_(n,e);c.env.NEXT_PUBLIC_EVENT_DEBUG_PRINT&&console.log("[_trackEvent] ".concat(t,": "),o);try{r.emit("analytics_event",{event_name:t,event_data:o,visitor_id:i,url:l,referrer:d,language:(0,u.qm)(),screen:"".concat(window.screen.width,"x").concat(window.screen.height),hostname:window.location.hostname,device_info:a,is_arc_browser:s})}catch(e){console.log(e)}}};setTimeout(()=>i(o),0)},h=async e=>{let{name:t,data:n,socket:r,session:o}=e,{eventData:i,visitorId:l,pathnameAndParams:u,isArcBrowser:s,deviceInfo:a,referrer:d}=_(n,o);return new Promise(e=>{if(c.env.NEXT_PUBLIC_EVENT_DEBUG_PRINT&&console.log("[_trackEventAsync] ".concat(t,": "),i),r){let n=setTimeout(()=>{e()},1e3);r.emitWithAck("analytics_event",{event_name:t,event_data:i,visitor_id:l,url:u,referrer:d,language:navigator.language,screen:"".concat(window.screen.width,"x").concat(window.screen.height),hostname:window.location.hostname,device_info:a,is_arc_browser:s}).then(()=>{clearTimeout(n),e()}).catch(()=>{clearTimeout(n),e()})}else e()})},T=(e,t)=>{var n,r;if(!f||f.firstServerResponseReceived||!f.submitTimestamp||!(null===(n=f.startFirstServerResponseMarker)||void 0===n?void 0:n.setOnce()))return;f.firstServerResponseReceived=!0;let{queryStr:o,isFollowup:i,queryParams:l}=f,u=y();u>0&&p({name:"query first server response",data:{startFirstServerResponseElapsed:u,queryStr:o,isFollowup:i,mode:null!==(r=null==l?void 0:l.mode)&&void 0!==r?r:"unknown"},socket:e,session:t})},v=(e,t,n)=>{var r,o;if(!f||f.firstLLMTokenReceived||!n||!(null===(r=f.startLLMTokenMarker)||void 0===r?void 0:r.setOnce()))return;f.firstLLMTokenReceived=!0;let{queryStr:i,isFollowup:l,queryParams:u}=f,s=A();s>0&&p({name:"query first llm token",data:{startLLMTokenElapsed:s,queryStr:i,isFollowup:l,mode:null!==(o=null==u?void 0:u.mode)&&void 0!==o?o:"unknown"},socket:e,session:t})},S=(e,t)=>{var n;f&&t&&(null===(n=f.firstSearchResultsMarker)||void 0===n||n.setOnce())},R=e=>{(0,o.aX)({urlPath:"/rest/metrics/collect",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>console.error(e))},g=(e,t)=>{try{R({submitQueryToBadSocket:{socketIsNull:e,socketIsDisconnected:t}})}catch(e){console.warn("Problem with reporting bad socket submit:",e)}},C=(e,t,n)=>{R({startStreamElapsed:{elapsedMs:e,isFollowup:t,mode:n=null!=n?n:"unknown"}})},w=(e,t,n)=>{R({startLLMTokenElapsed:{elapsedMs:e,isFollowup:t,mode:n=null!=n?n:"unknown"}})},O=(e,t,n)=>{R({firstSearchResultElapsed:{elapsedMs:e,isFollowup:t,mode:n=null!=n?n:"unknown"}})},P=(e,t,n)=>{R({startStreamHang:{isFollowup:e,numberOfEvents:n}})};class L{updateTimeout(){clearTimeout(this.timeoutForHangRequests),this.timeoutForHangRequests=null,this.timeoutForHangRequests=setTimeout(this.callback.bind(this),2e4)}keepTracking(){this.timeoutForHangRequests&&(++this.countEvents,this.updateTimeout())}stopTracking(){clearTimeout(this.timeoutForHangRequests),this.timeoutForHangRequests=null}callback(){this.stopTracking();let e=new Date;this.cb(e.getTime()-this.timerStarted.getTime(),this.countEvents)}constructor(e){this.timeoutForHangRequests=null,this.countEvents=0,this.timerStarted=new Date,this.cb=e,this.updateTimeout()}}let N=null,I=(e,t,n,r)=>{var o,i,l;if(!f)return;f.finalizedTimestamp=Date.now();let u=-1;f.submitTimestamp&&(u=f.finalizedTimestamp-f.submitTimestamp);let s=y();s>0&&C(s,f.isFollowup,null==f?void 0:null===(o=f.queryParams)||void 0===o?void 0:o.mode);let a=b();a>0&&O(a,f.isFollowup,null==f?void 0:null===(i=f.queryParams)||void 0===i?void 0:i.mode);let c=A();c>0&&w(c,f.isFollowup,null==f?void 0:null===(l=f.queryParams)||void 0===l?void 0:l.mode);let d=-1;f.endStreamTimestamp&&f.startFirstServerResponseMarker&&(d=f.startFirstServerResponseMarker.timeBeforeTimestamp(f.endStreamTimestamp));let E={...f,totalElapsed:u,startStreamElapsed:s,startFirstServerResponseElapsed:s,startLLMTokenElapsed:c,totalStreamingElapsed:d,submissionResult:e,entryUUID:null==t?void 0:t.backend_uuid,displayModel:null==t?void 0:t.display_model,stepType:null==t?void 0:t.step_type};p({name:"".concat(e," response"),data:E,socket:n,session:r})},y=()=>{var e,t;let n=-1;return f?n=null!==(t=null===(e=f.startFirstServerResponseMarker)||void 0===e?void 0:e.timeSinceTimestamp(f.submitTimestamp))&&void 0!==t?t:-1:n},A=()=>{var e,t;let n=-1;return f?n=null!==(t=null===(e=f.startLLMTokenMarker)||void 0===e?void 0:e.timeSinceTimestamp(f.submitTimestamp))&&void 0!==t?t:-1:n},b=()=>{var e,t;let n=-1;return f?n=null!==(t=null===(e=f.firstSearchResultsMarker)||void 0===e?void 0:e.timeSinceTimestamp(f.submitTimestamp))&&void 0!==t?t:-1:n},U={submitQuery:e=>{let{name:t,queryStr:n,queryParams:r,isFollowup:o,frontendUUID:i,socket:l,session:u}=e;d+=1,(f={...m}).submissionType=t,f.submitTimestamp=Date.now(),f.queryStr=n,f.queryParams=r,f.frontendUUID=i,f.submissionCount=d,f.isFollowup=o,f.startFirstServerResponseMarker=new E,f.firstSearchResultsMarker=new E,f.startLLMTokenMarker=new E,p({name:"submit query",data:{...f},socket:l,session:u})},handleStreamProgress:(e,t,n,r)=>{T(e,t),S(e,r),v(e,t,n)},endStreamResponse:()=>{f&&null===f.endStreamTimestamp&&(f.endStreamTimestamp=Date.now())},failedResponse:(e,t,n)=>{I("FAILED",e,t,n)},successfulResponse:(e,t,n)=>{I("SUCCESSFUL",e,t,n)},startTrackingHangRequests:e=>{null==N||N.stopTracking(),N=new L((t,n)=>{P(e,t,n)})},keepTrackingHangRequests:()=>{null==N||N.keepTracking()},stopTrackingHangRequests:()=>{null==N||N.stopTracking()},getStartLLMTokenElapsed:A,getStartFirstServerResponseElapsed:y,getFirstSearchResultElapsed:b,reportTakoWidgetRenderLatency:e=>{R({takoWidgetRenderLatency:{latency:e}})},reportAutosuggestLatencies:e=>{let{latencies:t,isMobile:n}=e;R({autosuggestLatency:{latencies:t,isMobile:n}})}},k=()=>{let e=(0,i.nO)(),t=(0,s.m)();return{trackEvent:(0,r.useCallback)((n,r)=>{p({name:n,data:r,socket:e,session:t})},[e,t]),trackEventTyped:(0,r.useCallback)((n,r)=>p({name:n,data:r,socket:e,session:t}),[e,t]),trackEventAsync:(0,r.useCallback)((n,r)=>h({name:n,data:r,socket:e,session:t}),[e,t])}}},69946:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(59683),o=n(78558);let i=()=>{let{data:e}=(0,r.useSession)(),t=(0,o.useRef)(e);return(0,o.useEffect)(()=>{var n,r,o;(null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.id)!==(null===(o=t.current)||void 0===o?void 0:null===(r=o.user)||void 0===r?void 0:r.id)&&(t.current=e)},[e]),t.current}},3747:function(e,t,n){"use strict";n.d(t,{$e:function(){return c},FX:function(){return a},HL:function(){return _},aG:function(){return s},aX:function(){return d},i8:function(){return p},vX:function(){return f},xo:function(){return h}});var r=n(12848),o=n(66998),i=n(28454),l=n(32608);let u="TimeoutError",s=2,a=async e=>m(e),c=async e=>d(e),d=async e=>{let t=(0,r.LY)();return await m({...e,baseUrlOverride:t})},E=async e=>{let{resource:t,options:n,timeoutMs:r,method:o,body:l,numRetries:a=0,backOffTime:c=1e3}=e,d={...n,method:null!=o?o:"GET",body:null!=l?l:null},E=()=>null;r&&(E=()=>{let e=new DOMException("fetch ".concat(t," timed out (").concat(r,"ms)"),u),n=new AbortController;return d.signal=n.signal,setTimeout(()=>n.abort(e),r)}),a>s&&i.Tb("Retries for fetch ".concat(t," exceeded MAX_RETRIES"));let m=a+1,f=null,_=null;do{a>0&&m!==a+1&&await new Promise(e=>setTimeout(e,c));let e=E();_=null;try{f=await fetch(t,d),clearTimeout(e);break}catch(e){_=e}clearTimeout(e),--m,c*=2}while(m>0);if(_)throw console.log("".concat(d.method," ").concat(t," exception: ").concat(_)),_._fetchMethod=d.method,_._fetchResource=t,_;return f},m=async e=>{var t,n;let{urlPath:o,timeoutMs:i,method:u,body:s,headers:a,baseUrlOverride:c,numRetries:d,backOffTime:m}=e,f={headers:{...(0,r.ds)(),...a}},_=null!==(n=null===(t=window)||void 0===t?void 0:t.location.hostname.includes("localhost"))&&void 0!==n&&n,p=l.env.NEXT_PUBLIC_USE_TOKEN_AUTH_FOR_SOCKET;if(_||p){let e=await (0,r.x1)();f.headers.Authorization="Bearer ".concat(e)}let h=null!=c?c:(0,r.k9)();return E({resource:(0,r.MP)(h,o),options:f,timeoutMs:i,method:u,body:s,numRetries:d,backOffTime:m})},f=e=>{var t;return null==e||e.productionMs,null==e||e.devMs,null!==(t=null==e?void 0:e.clientSideMs)&&void 0!==t?t:5e3},_=e=>{(0,o.x)("nextjs.ssr_render.rest_api_call.success",1,{fnName:e})},p=(e,t)=>{t instanceof Error&&h(e,(null==t?void 0:t.name)===u,{})},h=(e,t,n)=>{n=null!=n?n:{},(0,o.x)("nextjs.ssr_render.rest_api_call.failed",1,{fnName:e,wasTimeout:t,...n})}},49510:function(e,t,n){"use strict";n.d(t,{jy:function(){return c},nO:function(){return d}});var r=n(16158),o=n(78558),i=n(12848),l=n(80142),u=n(99556),s=n(32608);let a=o.createContext(null),c=o.memo(e=>{let{children:t,withCredentials:n,isMweb:c=!1}=e,[d,E]=(0,o.useState)(null),m=(0,o.useRef)(!1),{setSocketStatus:f}=(0,l.v)();return(0,o.useEffect)(()=>{let e=window.location.hostname.includes("localhost"),t=window.location.hostname.includes("vercel-dev-frontend"),r="staging.perplexity.ai"===window.location.hostname,o="testing.perplexity.ai"===window.location.hostname,l=s.env.NEXT_PUBLIC_USE_TOKEN_AUTH_FOR_SOCKET,a=e?i.ID:void 0;s.env.NEXT_PUBLIC_GLOBAL_SOCKET_URL_OVERRIDE&&(a=s.env.NEXT_PUBLIC_GLOBAL_SOCKET_URL_OVERRIDE),a||console.warn("No socket URL provided");let d=(null==a?void 0:a.startsWith("https://staging.i.perplexity.ai"))||(null==a?void 0:a.startsWith("https://testing.i.perplexity.ai"))||(null==a?void 0:a.startsWith("http://localhost"))||r||o,m=!!s.env.NEXT_PUBLIC_FORCE_CREDENTIALS,f=n||m,_=null;if(e||t||l){let e={...(0,i.B0)(),auth:e=>{(0,i.x1)().then(t=>{null===t?e({}):e({perplexity_jwt:t})})}};f&&(e.withCredentials=!0),d&&(e.transports=["websocket"]),E(_=(0,u.ZP)(a,e)),(0,i.Dp)(_,c)}else{let e={...(0,i.B0)()};f&&(e.withCredentials=!0),d&&(e.transports=["websocket"]),E(_=(0,u.ZP)(a,e)),(0,i.Dp)(_,c)}return()=>{null==_||_.disconnect()}},[c,n]),(0,o.useEffect)(()=>{if(d)return d.on("connect",()=>{m.current?f("reconnected"):(f("connected"),m.current=!0)}),d.on("disconnect",()=>{f("disconnected"),m.current=!0}),()=>{d.off("connect"),d.off("disconnect")}},[d,f]),(0,r.jsx)(a.Provider,{value:d,children:t})}),d=()=>(0,o.useContext)(a)},53573:function(e,t,n){"use strict";n.d(t,{A6:function(){return d},BJ:function(){return _},C8:function(){return m},Dq:function(){return h},H$:function(){return f},NJ:function(){return T},O5:function(){return p},Tw:function(){return c},d8:function(){return o},ej:function(){return i},mm:function(){return v},nJ:function(){return l},nm:function(){return a},qt:function(){return s},yG:function(){return E}}),n(33099);var r=n(36307);let o=(e,t,n)=>{r.Z.set(e,t,n)},i=e=>r.Z.get(e),l=e=>{r.Z.remove(e)},u="pplx.chosen-locale",s="pplx.la-status",a="pplx.mweb-splash-page-dismissed",c=1825,d=e=>{o(u,e,{expires:c})},E=()=>{var e;return null!==(e=i(u))&&void 0!==e?e:null},m=e=>{o("pplx.is-incognito",String(e),{})},f=e=>{o(a,String(e),{})},_=e=>{o("pplx.is-discover-interest-box-dismissed",String(e),{})},p=e=>{o("pplx.is-default-search-extension-install-clicked",String(e),{})},h=e=>{o(s,e,{})},T=e=>{o("pplx.is-enterprise-ad-dismissed",String(e),{})},v=()=>{var e;return null!==(e=i("pplx.visitor-id"))&&void 0!==e?e:null}},75059:function(e,t,n){"use strict";n.d(t,{k$:function(){return i},ZW:function(){return u},E7:function(){return o},RF:function(){return l},qm:function(){return s}});var r=n(53573);n(93496),n(67263),n(39788).z.enum(["en-US","fr-FR","de-DE","ja-JP","ko-KR","zh-CN","es-ES","hi-IN"]);let o=[{locale:"en-US",englishLabel:"English (English)",label:"English"},{locale:"fr-FR",englishLabel:"French (Fran\xe7ais)",label:"Fran\xe7ais"},{locale:"de-DE",englishLabel:"Standard German (Deutsch)",label:"Deutsch"},{locale:"ja-JP",englishLabel:"Japanese (日本語)",label:"日本語"},{locale:"ko-KR",englishLabel:"Korean (한국어)",label:"한국어"},{locale:"zh-CN",englishLabel:"Simplified Chinese (简体中文)",label:"简体中文"},{locale:"es-ES",englishLabel:"Spanish (Espa\xf1ol)",label:"Espa\xf1ol"},{locale:"hi-IN",englishLabel:"Hindi (हिंदी)",label:"हिंदी"}],i={locale:"en-US",englishLabel:"English (English)",label:"English"},l=o.map(e=>e.locale),u=i.locale;i.label;let s=()=>{var e,t,n;return null!==(n=(0,r.yG)())&&void 0!==n?n:null===(t=window)||void 0===t?void 0:null===(e=t.navigator)||void 0===e?void 0:e.language}},12848:function(e,t,n){"use strict";n.d(t,{B0:function(){return m},Dp:function(){return f},ID:function(){return i},IZ:function(){return s},LY:function(){return c},MP:function(){return p},N2:function(){return a},ds:function(){return E},k9:function(){return u},x1:function(){return _}});var r=n(65902);n(99556);var o=n(32608);let i="set_to_undefined"===o.env.NEXT_PUBLIC_DEFAULT_SOCKET_URL?void 0:o.env.NEXT_PUBLIC_DEFAULT_SOCKET_URL||"https://preview.perplexity.ai/",l=e=>window.location.hostname.includes("localhost")?e:"".concat(window.location.protocol,"//").concat(window.location.hostname),u=()=>{if(o.env.NEXT_PUBLIC_GLOBAL_SOCKET_URL_OVERRIDE)return o.env.NEXT_PUBLIC_GLOBAL_SOCKET_URL_OVERRIDE;if(!i)throw Error("No client socket URL provided");return l(i)},s=()=>o.env.EVENTLET_SERVER_REST_URL?o.env.EVENTLET_SERVER_REST_URL:o.env.SERVER_SOCKET_URL||i,a=()=>o.env.REST_ASYNC_SERVER_URL?o.env.REST_ASYNC_SERVER_URL:"http://default-web-server-async:5556",c=()=>o.env.NEXT_PUBLIC_REST_ASYNC_SERVER_URL?o.env.NEXT_PUBLIC_REST_ASYNC_SERVER_URL:l("https://testing.i.perplexity.ai"),d={reconnection:!0,reconnectionDelay:500,reconnectionDelayMax:5e3,reconnectionAttempts:999},E=()=>{let e={};return o.env.NEXT_PUBLIC_CF_ACCESS_ID&&(e["CF-Access-Client-Id"]=o.env.NEXT_PUBLIC_CF_ACCESS_ID),o.env.NEXT_PUBLIC_CF_ACCESS_SECRET&&(e["CF-Access-Client-Secret"]=o.env.NEXT_PUBLIC_CF_ACCESS_SECRET),o.env.NEXT_PUBLIC_PPL_DEV_HEADER_NAME&&o.env.NEXT_PUBLIC_PPL_DEV_HEADER_TOKEN&&(e[o.env.NEXT_PUBLIC_PPL_DEV_HEADER_NAME]=o.env.NEXT_PUBLIC_PPL_DEV_HEADER_TOKEN),o.env.PPL_VERCEL_SSR_CLIENT_HEADER_NAME&&o.env.PPL_VERCEL_SSR_CLIENT_HEADER_TOKEN&&(e[o.env.PPL_VERCEL_SSR_CLIENT_HEADER_NAME]=o.env.PPL_VERCEL_SSR_CLIENT_HEADER_TOKEN),o.env.SERVER_SIDE_CLIENT_TOKEN_HEADER_NAME&&o.env.SERVER_SIDE_CLIENT_TOKEN_HEADER_TOKEN&&(e[o.env.SERVER_SIDE_CLIENT_TOKEN_HEADER_NAME]=o.env.SERVER_SIDE_CLIENT_TOKEN_HEADER_TOKEN),e},m=()=>({auth:{jwt:"anonymous-ask-user"},extraHeaders:{...E()},...d}),f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.emit;e.emit=function(i){for(var l=arguments.length,u=Array(l>1?l-1:0),s=1;s<l;s++)u[s-1]=arguments[s];let a=r.QC,c=n?r.oC:t?r.Ox:r.DI,d=u.length-1,E="function"==typeof u[d]?d-1:d;E>=0&&"object"==typeof u[E]&&null!==u[E]&&(u[E]={version:a,source:c,...u[E]}),o.call(e,i,...u)}},_=async()=>{let e=null;try{let t=await fetch("/api/auth/token",{headers:{"X-Token-Type":"Perplexity-JWT"}});e=(await t.json()).perplexity_jwt}catch(e){console.warn("Error getting dev token:",e)}return e},p=(e,t)=>{let n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,"");return"".concat(n,"/").concat(r)}},95300:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(78558),o=n(72897);function i(e){let t=(0,r.useContext)(o.B);if(!t)throw Error("Attempted to access ColorSchemeContext from useColorScheme() without adding <ColorSchemeProvider> to the tree.");let[n,i]=(0,r.useState)(!t.isSystemColorScheme);(0,r.useEffect)(()=>{(null==e?void 0:e.addSecondPass)&&t.isSystemColorScheme&&!n&&i(!0)},[t.isSystemColorScheme,n,null==e?void 0:e.addSecondPass]);let l={...t};return(null==e?void 0:e.addSecondPass)&&(l.isColorSchemeReady=n),l}},68332:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(78558),o=n(83534);function i(e){(0,r.useEffect)(()=>{let t=window.matchMedia("(prefers-color-scheme: dark)");function n(){e(o.j.colorScheme)}return t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},[e])}},69184:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(78558),o=n(83534);function i(){return(0,r.useCallback)(()=>{let e="dark"===document.documentElement.dataset.colorScheme,t=o.j.colorScheme;e&&"light"===t?document.documentElement.dataset.colorScheme="light":e||"dark"!==t||(document.documentElement.dataset.colorScheme="dark")},[])}},72897:function(e,t,n){"use strict";n.d(t,{A:function(){return a},B:function(){return s}});var r=n(16158),o=n(78558),i=n(68332),l=n(83534),u=n(69184);let s=o.createContext(null);function a(e){let{children:t,userPreferredColorScheme:n}=e,[a,c]=(0,o.useState)(!n&&l.j.isSystemScheme),[d,E]=(0,o.useState)(null!=n?n:l.j.colorScheme),m=(0,o.useCallback)(e=>{l.j.userPreferredColorScheme=e,c(!1),E(e)},[]),f=(0,o.useCallback)(()=>{l.j.removeUserPreferredColorScheme(),c(!0),E(l.j.colorScheme)},[]),_=(0,u.P)(),p=(0,o.useCallback)(e=>{a&&(E(e),_())},[a,_]);return(0,i.P)(p),(0,o.useEffect)(()=>{l.j.isSystemScheme&&(document.documentElement.dataset.colorScheme=l.j.colorScheme)},[_]),(0,r.jsx)(s.Provider,{value:{colorScheme:d,isSystemColorScheme:a,setSystemColorScheme:f,setUserPreferredColorScheme:m},children:t})}},80142:function(e,t,n){"use strict";n.d(t,{U:function(){return l},v:function(){return u}});var r=n(16158),o=n(78558);let i=o.createContext({socketStatus:"connected",failedToConnect:!1,setSocketStatus:()=>{}}),l=e=>{let{children:t}=e,[n,l]=o.useState("connected"),[u,s]=(0,o.useState)(!1),a=(0,o.useRef)(n);return(0,o.useEffect)(()=>{if("connected"===n||"reconnected"===n)s(!1);else if("disconnected"===n){a.current=n;let e=setTimeout(()=>{"connected"!==a.current&&s(!0)},3e3);return()=>{clearTimeout(e)}}},[n]),(0,r.jsx)(i.Provider,{value:{socketStatus:n,setSocketStatus:l,failedToConnect:u},children:t})},u=()=>{let e=o.useContext(i);if(!e)throw Error("useSocketStatus must be used within SocketStatusContext");return e}},16330:function(e,t,n){"use strict";var r,o,i,l,u,s;n.d(t,{$u:function(){return a},FM:function(){return r},Jr:function(){return o},uv:function(){return i}});let a={tiny:"tiny",small:"small",regular:"regular",large:"large",xl:"xl",none:"none"};(l=r||(r={})).RETRY_BUTTON="retryButton",l.PRO_PAGE="proPage",l.SHARE_DROPDOWN="shareDropdown",l.PRICING_TABLE="pricingTable",l.TRY_COPILOT="tryCopilot",l.LIBRARY_PAGE="libraryPage",l.DISCOVER_TOPICS="discoverTopics",l.COLLECTIONS="collections",l.THREAD_SOCIAL="threadSocial",l.MOBILE_SIGNUP="mobileSignup",l.RELATED_QUERIES="relatedQueries",l.FILE_UPLOAD="fileUpload",l.TRY_PRO="tryPro",l.LOGIN_BUTTON="loginButton",l.SIGNUP_BUTTON="signupButton",l.LOGIN_BUTTON_HEADER="loginButtonHeader",l.SIGNUP_BUTTON_HEADER="signupButtonHeader",l.FLOATING_SIGNUP="floatingSignup",l.VISITOR_GATE="visitorGate",l.GENERATE_IMAGE="generateImage",l.PPLX_API_PAGE="pplxApiPage",l.GOOGLE_ONETAP_HOME="oneTapHome",l.GOOGLE_ONETAP_THREAD="oneTapThread",l.GOOGLE_ONETAP_PAGE="oneTapPage",l.GOOGLE_ONETAP_DISCOVER="oneTapDiscover",l.GOOGLE_ONETAP_UNKNOWN="oneTap",l.ONBOARDING="onboarding",l.NEXTAUTH_SIGNIN_PAGE="nextauthSignInPage",l.DISCOUNT_CODE_BANNER="discountCodeBanner",l.PARTNER_CODE="partnerCode",l.ARTICLE_NEW="articleNew",l.THREAD_TO_ARTICLE="threadToArticle",l.ORG_CREATE="orgCreate",l.ORG_PANEL="orgPanel",l.LOSS_AVERSION_MODAL="lossAversionModal",l.NEW_THREAD_BUTTON="newThreadButton",l.NEW_THREAD_SHORTCUT="newThreadShortcut",l.DISCOVER_BUTTON="discoverButton",l.THREAD_BOOKMARK_BUTTON="threadBookmarkButton",l.PAGE_BOOKMARK_BUTTON="pageBookmarkButton",l.DISCOVER_FEED_BOOKMARK_BUTTON="discoverFeedBookmarkButton",l.BACK_TO_SCHOOL="backToSchool",(u=o||(o={})).NONE="NONE",u.INCOGNITO="INCOGNITO",(s=i||(i={}))[s.OWNER_ONLY=0]="OWNER_ONLY",s[s.PRIVATE_READ=1]="PRIVATE_READ",s[s.PUBLIC_READ=2]="PUBLIC_READ",s[s.PUBLIC_PUBLISHED=3]="PUBLIC_PUBLISHED"},83534:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(36307);class o{static get userPreferredColorScheme(){return r.Z.get(this.PREFERRED_COLOR_SCHEME_COOKIE)}static set userPreferredColorScheme(e){r.Z.set(this.PREFERRED_COLOR_SCHEME_COOKIE,e,{expires:400}),localStorage.setItem(this.PREFERRED_COLOR_SCHEME_COOKIE,e)}static removeUserPreferredColorScheme(){r.Z.remove(this.PREFERRED_COLOR_SCHEME_COOKIE),localStorage.removeItem(this.PREFERRED_COLOR_SCHEME_COOKIE)}static get isSystemScheme(){return!0!=!!this.userPreferredColorScheme}static get colorScheme(){return this.isSystemScheme?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.userPreferredColorScheme}}o.PREFERRED_COLOR_SCHEME_COOKIE="colorScheme"},66998:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(32608);n(16212).lW,r.env.DD_AGENT_HOST;let o=function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4]}},84385:function(e,t,n){"use strict";n.d(t,{qY:function(){return p},QI:function(){return a},RP:function(){return E},Uz:function(){return _},uf:function(){return u},db:function(){return m},dz:function(){return h},G0:function(){return f},Mp:function(){return s},vl:function(){return c},EH:function(){return i},bJ:function(){return l},wU:function(){return d},aF:function(){return S}});var r=n(2146);let o=(e,t)=>{let n=window.localStorage.getItem(e);return[n?JSON.parse(n):t,t=>{window.localStorage.setItem(e,JSON.stringify(t))}]},i=e=>l(e.text),l=e=>{let t=null;try{if(t=JSON.parse(null!=e?e:""),Array.isArray(t)){var n;let e=t[t.length-1];"FINAL"==e.step_type&&(null==e?void 0:null===(n=e.content)||void 0===n?void 0:n.answer)!=null&&(t=JSON.parse(e.content.answer))}}catch(e){return null}return t},u=e=>{let t=Number(e);return isNaN(t)?(console.log("formatNumber number failed on: ".concat(e)),"0"):t.toLocaleString("en-US")},s=()=>(0,r.Z)(),a={status:"pending",uuid:s()},c=e=>e.some(e=>"pending"!==e.status),d=(e,t,n)=>{if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let r=Object.keys(e),o=Object.keys(t);return r.length==o.length&&r.every(r=>n?n(e[r],t[r]):e[r]===t[r])},E=(e,t)=>{let n=new URL(e);return n.searchParams.delete("source"),n.searchParams.delete("s"),t&&(n.hash=t),n.searchParams.sort(),n.href};function m(e){try{return new Date(e.replace(/-/g,"/")).toLocaleString("en-US",{weekday:"long",hour:"numeric",minute:"numeric",hour12:!0})}catch(e){console.log(e)}return null}function f(e){return e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:3})}function _(e,t,n){let r=new URL(e),o=r.searchParams;return o.set(t,n),r.search=o.toString(),r.toString()}let p=e=>{let t;if("string"==typeof e){if(isNaN(t=parseFloat(e)))throw Error("Invalid input: not a number")}else if("number"==typeof e)t=e;else throw Error("Invalid input: not a string or number");return t.toLocaleString("en-US")},h=()=>{let[e,t]=o("deviceInfo",{});if(0===Object.keys(e).length)try{navigator.hardwareConcurrency&&(e.hardwareConcurrency=navigator.hardwareConcurrency);let n=new Float32Array(1),r=new Uint8Array(n.buffer);n[0]=1/0,n[0]=n[0]-n[0];let o=r[3];o&&(e.architecture=o),window.screen.colorDepth&&(e.colorDepth=window.screen.colorDepth),window.screen.width&&window.screen.height&&(e.screenSize="".concat(window.screen.width,"x").concat(window.screen.height)),t(e)}catch(e){}return e},T=/\[(\d{1,2})(,\s*\{ts:\d+\})?\]/g,v=/(\n*^(("""+|'''+|```+)[A-Za-z0-9]*|#+ .*)$|^- |\*\*|\$\$|\||`|[-|]{3,})/gm;function S(e,t){let n=e.replace(v,"").replace(T,"").trim();if(n.length<=t)return n;{let e=n.slice(0,t).trim(),r=e.lastIndexOf(" ");return 2*r>t&&r<t-1?e.slice(0,r)+"...":e+"..."}}},65902:function(e,t,n){"use strict";n.d(t,{$P:function(){return V},$Y:function(){return x},Az:function(){return W},Ci:function(){return D},DI:function(){return O},FC:function(){return X},FO:function(){return g},Fv:function(){return u},GU:function(){return K},IB:function(){return T},Ik:function(){return G},Jp:function(){return h},Mc:function(){return d},Mg:function(){return R},N9:function(){return k},Ox:function(){return L},Pi:function(){return f},Pv:function(){return B},QC:function(){return w},Qk:function(){return _},Qn:function(){return S},Sh:function(){return I},Sz:function(){return N},U6:function(){return A},UR:function(){return Z},WU:function(){return o},Wn:function(){return s},Yu:function(){return b},Z4:function(){return U},_0:function(){return y},d2:function(){return q},ef:function(){return m},f4:function(){return H},fT:function(){return v},fn:function(){return a},k6:function(){return M},oB:function(){return F},oC:function(){return P},oW:function(){return C},pt:function(){return l},qC:function(){return z},rd:function(){return Y},rs:function(){return c},uC:function(){return j},uE:function(){return E},uM:function(){return p}});var r,o,i=n(16330);let l={default:{termsOfService:"https://www.perplexity.ai/hub/legal/terms-of-service",privacyPolicy:"https://www.perplexity.ai/hub/legal/privacy-policy"},"ja-JP":{termsOfService:"https://www.perplexity.ai/ja/hub/legal/terms-of-service",privacyPolicy:"https://www.perplexity.ai/ja/hub/legal/privacy-policy"}},u="https://www.perplexity.ai/download-iphone",s="https://www.perplexity.ai/download-android",a=2e3,c=2e3,d=50,E=1e3,m=1500,f=100,_=400,p=4,h=500,T=5e3,v=26214400,S=10,R=2e3,g="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png",C="https://r2cdn.perplexity.ai/perplexity-pro-og.png",w="2.12",O="default",P="server",L="mweb",N="autodetect",I=["video/mp4","video/webm","video/ogg","video/quicktime","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/wav","application/msword","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-bzip","application/vnd.rar"],y=[".pdf",".txt",".py",".ipynb",".js",".jsx",".html",".css",".java",".cs",".php",".c",".cpp",".cxx",".h",".hpp",".rs",".R",".Rmd",".swift",".go",".rb",".kt",".kts",".ts",".tsx",".m",".scala",".rs",".dart",".lua",".pl",".pm",".t",".sh",".bash",".zsh",".csv",".log",".ini",".config",".json",".yaml",".yml",".toml",".lua",".sql",".bat",".md",".coffee",".tex",".latex",".less",".pptx",".docx"],A=y.join(","),b=[".jpeg",".jpg",".jpe",".jp2",".png",".gif",".bmp",".tiff",".tif",".svg",".webp",".ico",".avif",".heic",".heif"],U=b.join(","),k=[...y,...b],D=k.join(","),x="",B=i.uv.PUBLIC_READ,M=i.uv.PRIVATE_READ;(r=o||(o={})).INITIAL_QUERY="INITIAL_QUERY",r.USER_INPUT="USER_INPUT",r.SEARCH_WEB="SEARCH_WEB",r.SEARCH_RESULTS="SEARCH_RESULTS",r.ATTACHMENT="ATTACHMENT",r.TERMINATE="TERMINATE",r.USER_SKIP="USER_SKIP",r.USER_REGENERATE="USER_REGENERATE",r.USER_TEXT="USER_TEXT",r.USER_CHECKBOX="USER_CHECKBOX",r.PERSONALIZE="PERSONALIZE",r.PROMPT_INPUT="PROMPT_INPUT",r.PROMPT_TEXT="PROMPT_TEXT",r.WIDGET_RESULTS="WIDGET_RESULTS",r.SEARCH_WIDGET="SEARCH_WIDGET",r.FINAL="FINAL",r.PROMPT_CHECKBOX="PROMPT_CHECKBOX",r.PROMPT="PROMPT",r.CODE="CODE";let H="https://chrome.google.com/webstore/detail/perplexity-ai-search/bnaffjbjpgiagpondjlnneblepbdchol",F=["en-US"],G="onboarding",j="uninstall_default_search_extension",K="edu_referral_code",V="utm_source",X="backtoschool",W="/static/images/unlock-the-power.jpg",q="galaxy",z="/static/images/back-to-school-ad.png",Y="/static/images/back-to-school-splash.png",Z="back-to-school"}},function(e){e.O(0,[9275,2311,9683,5708,9064,6235,1744],function(){return e(e.s=77318)}),_N_E=e.O()}]);